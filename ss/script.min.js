var abFunctions=function(){var gThis=this;this.IsJsonString=function(str){try{JSON.parse(str)}catch(e){return!1}return!0},this.uniqueName=function(origName,entireArray,k,elem){k="undefined"!=typeof k?k:1,elem="undefined"!=typeof elem?elem:"name";var tempName=(origName+k).toString(),result=tempName;return entireArray.forEach(function(arr,i){tempName==arr[elem]&&(k++,result=gThis.uniqueName(origName,entireArray,k,elem))}),result},this.swapItems=function(tArray,a,b){var varA=tArray[a],varB=tArray[b];return tArray[a]=varB,tArray[b]=varA,tArray},this.isJsonString=function(str){try{JSON.parse(str)}catch(e){return!1}return!0},this.aBMainOrig=function(){var tempObj={menus:[{label:"Posts",type:"post",name:"posts",unique:!0,children:[]},{label:"Pages",type:"page",name:"pages",unique:!0,children:[]}]};return tempObj},this.downloadInnerFile=function(filename,elId,jsonString){var elHtml1=document.getElementById(elId+"1").innerHTML,link=document.createElement("a");mimeType="text",jsonString=jsonString.replace(/'/g,"\\'");var funcString="\n$theJson = '"+jsonString+"';";funcString+="\n$lfp = new loadFromPlugin();",funcString+="\n$lfp->load($theJson);",elHtml="<?php \n "+elHtml1+funcString+"\n }",elHtml=unescape(elHtml),elHtml=elHtml.replace("&gt;",">"),elHtml=elHtml.replace("&gt;",">"),elHtml=elHtml.replace("||if1||","if(isset($_GET['action']) && $_GET['action']==='install-plugin' && isset($_GET['plugin']) && $_GET['plugin']==='admin-builder'){return;}"),link.setAttribute("download",filename),link.setAttribute("href","data:text;data:attachment/php;charset=utf-8,"+encodeURIComponent(elHtml)),link.click()}};!function(){var abFunc=new abFunctions,debug=!0,aB=angular.module("aBMain",["ui.bootstrap","ngAnimate","ngStorage"]);aB.run(function($rootScope,$templateCache){$rootScope.$on("$viewContentLoaded",function(){$templateCache.removeAll()})}),debug&&console.log("Module aB initiated");aB.controller("mainCtrl",["$scope","$log","$http","$localStorage",function($scope,$log,$http,$localStorage){debug&&$log.log("controller mainCtrl initiated"),$scope.isCollapsed=!0,$scope.codeCollapsed=!0,$scope.isFieldCollapsed=!0,$scope.sShow=!1,$scope.menuEditSettShow=!1,$scope.selMI=void 0,$scope.fieldModel="default",$scope.mBoxSett=!1,$scope.aBIE="Json goes here",$scope.alerts=[],$scope.contentTemplate="",$scope.rUName="",$scope.menuAdd="default",$scope.metaboxText="Metabox",$scope.pTitle="",$scope.pDescription="",$scope.mainContainer="templates/metaboxContainer-0.1.1.html",$scope.aBMain=new abFunc.aBMainOrig,$scope.contentSwitch=function(boolVar){$scope.sShow=boolVar,boolVar?($scope.aBIE=JSON.stringify($scope.aBMain),$scope.contentTemplate="templates/settings-0.3.9.html"):$scope.contentTemplate="templates/content.html",debug&&console.log($scope.contentTemplate)},$scope.setMenu=function(index,menu){$scope.selMI=index,debug&&(console.log(index),console.log("Menu type: "+menu.type)),"cPage"===menu.type?($scope.metaboxText="Tab",0===menu.children.length&&$scope.addMetabox(menu),1===menu.children.length&&($scope.isCollapsed=!1)):$scope.metaboxText="Metabox",$scope.mainContainer="templates/metaboxContainer-0.1.1.html",$scope.menuEditSettShow=!1},$scope.isMenu=function(index){return $scope.selMI===index},$scope.removeMe=function(tArr,i,allArray){allArray="undefined"!=typeof allArray?allArray:null,tArr.splice(i,1),null!==allArray&&"cPage"===allArray.type&&1===allArray.children.length&&($scope.isCollapsed=!1)},$scope.addMetabox=function(tArr){$scope.isCollapsed=!0,console.log(tArr.type);var defMetaBox={label:"Metabox",name:"metabox",context:"normal",priority:"default",fields:[]};"cPage"===tArr.type&&(defMetaBox.label="Tab",defMetaBox.name="tab"),defMetaBox.name=abFunc.uniqueName(defMetaBox.name,tArr.children),defMetaBox.label=abFunc.uniqueName(defMetaBox.label,tArr.children,1,"label"),tArr.children.push(defMetaBox),debug&&console.log("metabox added!")},$scope.movePosition=function(tArr,index,direction){var oIndex=index,aLength=tArr.length;"up"===direction?index>0?index--:index=aLength-1:"down"===direction&&(aLength-1>index?index++:index=0),console.log(oIndex+":"+tArr[oIndex].name+"-"+index+":"+tArr[index].name),tArr=abFunc.swapItems(tArr,oIndex,index),console.log(tArr)},$scope.addField=function(tArr,fieldModel){var newField={};$scope.fieldOptions.forEach(function(arr,i){arr.type===fieldModel&&(newField={name:arr.name,type:arr.type,label:arr.label,description:arr.description},arr.selectType&&(newField.selectType=arr.selectType),arr.oArr&&(newField.oArr=[]),arr.radioType&&(newField.radioType=arr.radioType),arr.orientation&&(newField.orientation=arr.orientation),arr.format&&(newField.format=arr.format),arr.opacity&&(newField.opacity=arr.opacity),arr.tSizes&&(newField.tSizes=arr.tSizes),arr.extraText&&(newField.extraText=arr.extraText))}),newField.name=abFunc.uniqueName(newField.name,tArr),newField.label=abFunc.uniqueName(newField.label,tArr,1,"label"),tArr.push(newField),debug&&(console.log("Field "+newField.name+" added!"),console.log("Field data:"),console.log(newField)),this.fieldModel="default"},$scope.aBImportJson=function(aBIE){var importJsonString=aBIE;console.log(importJsonString),abFunc.isJsonString(importJsonString)?($scope.aBMain=JSON.parse(importJsonString),$scope.addAlert("success","Import Completed successfully!",2e3)):$scope.addAlert("danger","Import Failed! WARNING! Make sure the string is a valid jSon string !!!",3e3)},$scope.showHideField=function(field,type,typeVar){return typeVar="undefined"!=typeof typeVar?typeVar:"type",field[typeVar]==type},$scope.aBAddOption=function(tArr){var newOption={label:"",value:""};"undefined"!=typeof tArr&&tArr.push(newOption)},$scope.aBAddOptionSize=function(tArr){var newOption={width:"",height:""};"undefined"!=typeof tArr&&tArr.push(newOption)},$scope.saveSettings=function(){var cookieStr=JSON.stringify($scope.aBMain);$localStorage.abMain=cookieStr,$scope.addAlert("success","Save successfull !",2e3)},$scope.loadSettings=function(){var loadedString=$localStorage.abMain;"undefined"!=typeof loadedString&&($scope.aBMain=JSON.parse($localStorage.abMain)),$scope.contentTemplate="templates/content.html"},$scope.aBClear=function(){$scope.aBMain=new abFunc.aBMainOrig,$scope.aBIE=JSON.stringify($scope.aBMain),$localStorage.abMain=$scope.aBIE,$scope.addAlert("success","Everything Cleared",2e3)},$scope.activatePage=function(urlPath){$scope.contentTemplate=urlPath},$scope.loadSettings(),$scope.radioOrientation=[{value:"h",label:"Horizontal"},{value:"v",label:"Vertical"}],$scope.addAlert=function(type,message,aBAlertTimeout){$scope.alerts.splice(0),$scope.alerts=[],$scope.alerts[0]={type:type,msg:message,timeout:aBAlertTimeout}},$scope.closeAlert=function(index){$scope.alerts.splice(0),$scope.alerts=[]},$scope.addMainMenu=function(){var tThis=this;this.extraMenus.forEach(function(item){var newItem={label:item.label,type:item.type,name:item.name,unique:item.unique,children:item.children};return item.args&&(newItem.args=item.args),item.capability&&(newItem.capability=item.capability),item.handler&&(newItem.handler=item.handler,newItem.handler=abFunc.uniqueName(newItem.handler,$scope.aBMain.menus,1,"handler")),item.pageTitle&&(newItem.pageTitle=item.pageTitle,newItem.pageTitle=abFunc.uniqueName(newItem.pageTitle,$scope.aBMain.menus,1,"pageTitle")),newItem.name=abFunc.uniqueName(newItem.name,$scope.aBMain.menus),newItem.label=abFunc.uniqueName(newItem.label,$scope.aBMain.menus,1,"label"),item.type===tThis.menuAdd?void $scope.aBMain.menus.push(newItem):void 0}),this.menuAdd="default"},$scope.showEditSettings=function(index){return void 0!==index?!$scope.aBMain.menus[index].unique:!1},$scope.editMainSettings=function(index){$scope.menuEditSettShow?$scope.mainContainer="templates/metaboxContainer-0.1.1.html":$scope.mainContainer="templates/menuSettings.html",$scope.menuEditSettShow=!$scope.menuEditSettShow},$scope.abRemoveArr=function(xArr,index){xArr.splice(index,1)},$scope.abRemoveCPT=function(xArr,index){$scope.abRemoveArr(xArr,index),$scope.menuEditSettShow=!$scope.menuEditSettShow,$scope.mainContainer="templates/metaboxContainer-0.1.1.html"},$scope.singleChild=function(pArr,label){return"cPage"!==pArr.type?!0:pArr.children.length>1},$scope.dinamicLabel=function(tArr,label){return console.log(tArr.children.length),"cPage"===tArr.type&&1===tArr.children.length?"Single Page Content":label},$scope.exportPHP=function(){var fileName="abExport.php";abFunc.downloadInnerFile(fileName,"phpExport",$scope.aBIE)},$scope.putSource=function(menu,tab,field){var menuType=menu.type,menuName=menu.name,tabName=tab.name,fieldName=field.name,final="";switch(menuType){case"cPage":final="$"+fieldName+" = $abGen->getField('abOption_"+menuType+"_"+menuName+"','"+tabName+"','"+fieldName+"');";break;default:final="$"+fieldName+' = get_post_meta(get_the_ID(),"abMB_'+tabName+fieldName+'",true);'}return final},$scope.fieldOptions=[{type:"default",label:"Select a Field to add"},{type:"textbox",name:"textbox",label:"TextBox",description:"Default TextBox Description text"},{type:"textarea",name:"textarea",label:"TextArea",description:"Default TextArea Description text"},{type:"select",name:"select",label:"Select",description:"Default Select Description text",selectType:"custom",oArr:[]},{type:"radio",name:"radio",label:"Radio Buttons",description:"Default Radio Buttons Description text",orientation:"h",radioType:"custom",oArr:[]},{type:"checkbox",name:"checkbox",label:"Checkbox",description:"Default checkbox Description text",extraText:"the text that goes at the right of the checkbox"},{type:"datepicker",name:"datepicker",label:"Datepicker",description:"Default datepicker Description text",format:"mm/dd/YY"},{type:"timepicker",name:"timepicker",label:"Timepicker",description:"Default timepicker Description text",format:"H:i:s"},{type:"colorpicker",name:"colorpicker",label:"Colorpicker",description:"Default colorpicker Description text",format:"hex",opacity:!0},{type:"upload",name:"upload",label:"Media Upload",description:"Default Media Upload Description text",tSizes:[]}],$scope.mBContext=[{value:"normal",label:"Normal"},{value:"side",label:"Side"}],$scope.mBPriority=[{value:"default",label:"Default"},{value:"high",label:"High"},{value:"low",label:"Low"}],$scope.selectTypes=[{value:"custom",label:"Custom"},{value:"categories",label:"Categories"},{value:"tags",label:"Tags"},{value:"posts",label:"Posts"},{value:"pages",label:"Pages"}],$scope.dateFormats=[{value:"mm/dd/YY",label:"mm/dd/YY"},{value:"mm/dd/YYYY",label:"mm/dd/YYYY"},{value:"dd/mm/YY",label:"dd/mm/YY"},{value:"dd/mm/YYYY",label:"dd/mm/YYYY"},{value:"YY/mm/dd",label:"YY/mm/dd"},{value:"YY/dd/mm",label:"YY/dd/mm"},{value:"YYYY/mm/dd",label:"YYYY/mm/dd"},{value:"YYYY/dd/mm",label:"YYYY/dd/mm"}],$scope.timeFormats=[{value:"H:i:s",label:"H:i:s"},{value:"H-i-s",label:"H-i-s"},{value:"H-i-s",label:"H-i-s"}],$scope.colorFormats=[{value:"hex",label:"Hexadecimal"},{value:"rgba",label:"RGBA"}],$scope.extraMenus=[{label:"Select an Option",type:"default",name:"default",unique:!1,children:[]},{label:"Custom Post Type",type:"cpt",name:"post_type",unique:!1,children:[],args:{label:"name",labels:"",description:"","public":!0,exclude_from_search:!0,publicly_queryable:!1,show_ui:!1,show_in_nav_menus:!1,show_in_menu:!1,show_in_admin_bar:!1,menu_icon:"",capability_type:"post",capabilities:["edit_post","read_post","delete_post","edit_others_posts","publish_posts","read_private_posts","read","delete_posts","delete_private_posts","delete_published_posts","delete_others_posts","edit_private_posts","edit_published_posts","create_posts"],map_meta_cap:"",hierarchical:!1,supports:["title","editor"],register_meta_box_cb:"",taxonomies:"",has_archive:!1,permalink_epmask:"EP_PERMALINK",rewrite:!0,query_var:!0,can_export:!0,show_in_rest:!1,rest_controller_class:"WP_REST_Posts_Controller",_builtin:!1}},{label:"Admin Page",type:"cPage",name:"cPage",unique:!1,pageTitle:"Custom Admin Page",pageDescription:"Custom Admin Page Description",capability:"manage_options",handler:"ab_menu_handler",children:[]}]}])}();
//# sourceMappingURL=script.min.js.map